<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bosom Buddy Builder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.2/css/bootstrap-select.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.2/js/bootstrap-select.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
 
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="display-3 text-center text-primary card-header"><i class="fas fa-question"></i>
                        Survey Questions
                        <i class="fas fa-question"></i>
                    </div>
                    <div class="card-body">
                            <p>Answer all questions truthfully for most accurate buddy matching.</p>
                            <p>Rating scale: <strong> 1 - Strongly Disagree </strong> and <strong>5 - Strongly Agree</strong></p>
                        <form name="surveyForm">
                            <div class="form-group">
                                <label for="name">Name <span style = "color:black;font-size: .7em">(required)</span></label>
                                <input type="text" class="form-control" id="name" placeholder="Enter your name" required>
                            </div>

                            <div class="form-group">
                                <label for="photo">Photo Image <span style = "color:black;font-size: .7em" >(required)</span></label>
                                <input type="text" class="form-control" id="photo" placeholder="Provide a Link to Your Image" required>
                            </div>
                            <hr>

                            <div class="form-group">
                                    <label for="Question1">Question 1</label>
                                    <p>I am very easy-going. It takes a lot to ruffle my feathers.</p>
                                    <select class="chosen-select form-control" id="Question1" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 2</label>
                                    <p>Cats are the best creatures who have ever roamed this Earth.#catsrule</p>
                                    <select class="chosen-select form-control" id="Question2" requried>
                                            <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 3</label>
                                    <p>My friends think I'm bossy. What's wrong with wanting to be in charge?</p>
                                    <select class="chosen-select form-control" id="Question3" requried>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                    <br>

                                    <label for="Question1">Question 4</label>
                                    <p>My ideal weekend is eating pizza while binge-watching "Stranger Things" on Netflix.</p>
                                    <select class="chosen-select form-control" id="Question4" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 5</label>
                                    <p> I have to change channels every time I see an ASPCA commercial on TV, especially if it features neglected cats (see question 2 for explanation).</p>
                                    <select class="chosen-select form-control" id="Question5" required>
                                        <option></option> 
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 6</label>
                                    <p>I'm always the first person to hit the dance floor to show off my signature moves.</p>
                                    <select class="chosen-select form-control" id="Question6" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 7</label>
                                    <p>My parents are my best friends. I feel sorry for you if yours aren't.</p>
                                    <select class="chosen-select form-control" id="Question7" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 8</label>
                                    <p>I'm known for being spontaneous and adventurous. My suitcase is always packed just in case.</p>
                                    <select class="chosen-select form-control" id="Question8" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 9</label>
                                    <p>I try to be present in every moment. Why dwell on the past?</p>
                                    <select class="chosen-select form-control" id="Question9" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>

                                    <label for="Question1">Question 10</label>
                                    <p>I try not to judge people as you never know what they've been through. </p>
                                    <select class="chosen-select form-control" id="Question10" required>
                                        <option></option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                     <br>
                            </div>
                            
                            <button id="submitButton" type="submit" class="btn btn-primary btn-lg">Submit</button>
                        </form>
                     </div>
                </div>
           </div>
        </div>  
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h2 class="modal-title" id="friendName"></h2>
                     
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                       <p class="modal-title" id="friendPicture"></p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" id = "modalClose" class="btn btn-primary" data-dismiss="modal">Close</button>
                     </div>
                  </div>
                </div>
              </div>

        <footer class="footer">
          <div class="container">
            <p><a href="/api/friends">API Friends List </a> | <a href="https://github.com/JuliaLid/Friend-Finder-App-Using-Node-and-Express-Servers" target="_blank" >GitHub Repo</a></p>
          </div>
        </footer>
    </div> 
    
    <style type="text/css">
        #bootstrapSelectForm .selectContainer .form-control-feedback {
            /* Adjust feedback icon position */
            right: -15px;
        }
        .fa-question{
            color: #007bff;  
        }

        label {
            color: #007bff;  
            font-size: 150%;
            };

    </style>
    <script>
  
        $("#submitButton").on("click", function(event){
            event.preventDefault();

            function validateForm() {
                var isValid = true;
                $(".form-control").each(function() {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            $(".chosen-select").each(function() {
                if ($(this).val() === "") {
                isValid = false;
                }
                });
                return isValid;
        }

         if (validateForm()){    
            var friend = {
                name:$("#name").val().trim(),
                photo:$("#photo").val().trim(),
                question1:$("#Question1").val(),
                question2:$("#Question2").val(),
                question3:$("#Question3").val(),
                question4:$("#Question4").val(),
                question5:$("#Question5").val(),
                question6:$("#Question6").val(),
                question7:$("#Question7").val(),
                question8:$("#Question8").val(),
                question9:$("#Question9").val(),
                question10:$("#Question10").val()
            };

            console.log(friend);

                
            $.post("/api/friends", friend)
                
            .then(function(data) {
                    $("#friendName").html(data[0]);
                    var img = $("<img>");
                    img.attr("src",data[1]);
                    img.addClass("img-fluid rounded mx-auto d-block")
                    img.appendTo("#friendPicture");
                               
                    $('#myModal').modal({ show: true})
            });

             } else {
                alert("Please fill out all fields before submitting!");
            }
        });
    
       
    $('#modalClose').on('click', function (e) {
            window.location.reload();
      });
        
                    
    </script>
</body>
</html>